<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Furniture website</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/register.css">
</head>

<body>
    <div class="container-fluid vh-100">
        <div class="row h-100">
            <!-- Left Section -->
            <div class="col-md-6 d-flex align-items-center justify-content-center position-relative">
                <div class="form-container text-center p-4">
                    <h2 class="mb-4">Get Started Now</h2>
                    <form id="signform" method="POST" action="/signup">
                        <div class="mb-3">

                            <div class="mb-3">
                                <label for="name" class="form-label">User Name</label>
                                <input type="name" id="name" name="name" class="form-control"
                                    placeholder="Enter your name">
                                <div id="nameError" class="text-danger" style="display:none;">Please enter a valid name.
                                </div>
                            </div>
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" id="email" name="email" class="form-control"
                                placeholder="Enter your email">
                            <div id="emailError" class="text-danger" style="display:none;">Please enter a valid email.
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Password</label>
                            <input type="password" id="password" name="password" class="form-control"
                                placeholder="Enter your password">
                            <div id="passwordError" class="text-danger" style="display:none;">Password must be at least
                                6 characters long.</div>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label">Confirm Password</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" class="form-control"
                                placeholder="Confirm your password">
                            <div id="confirmPasswordError" class="text-danger" style="display:none;">Passwords do not
                                match.</div>
                        </div>

                        <button type="submit" class="btn btn-primary w-100">Signup</button>
                    </form>
                    <div class="divider my-4">or</div>
                    <div class="d-flex justify-content-around">

                        <button class="btn btn-outline-secondary">
                            <img src="https://img.icons8.com/color/20/google-logo.png" alt="Google">
                            <a href="/auth/google">Sign in with Google</a>
                        </button>
                    </div>
                    <p class="mt-4">Have an account? <a href="/login" class="text-primary">Sign
                            In</a></p>
                </div>
            </div>
            <!-- Right Section -->
            <div class="col-md-6 p-0">
                <img src="/images/singupImg.webp" alt="Product Display" class="img-fluid h-100 w-100 object-cover">
            </div>
        </div>
    </div>





    <script>
        const nameid = document.getElementById("name");
        const emailid = document.getElementById("email");
        const passwordid = document.getElementById("password");
        const confirmPasswordid = document.getElementById("confirmPassword");

        const nameError = document.getElementById("nameError");
        const emailError = document.getElementById("emailError");
        const passwordError = document.getElementById("passwordError");
        const confirmPasswordError = document.getElementById("confirmPasswordError");

        const signform = document.getElementById("signform");

        let nameTouched = false;
        let emailTouched = false;
        let passwordTouched = false;
        let confirmTouched = false;

        function nameValidate() {
            const value = nameid.value;
            const trimmed = value.trim();

            if (!nameTouched || value === "") {
                nameError.style.display = "none";
                return;
            }

            if (trimmed === "") {
                nameError.style.display = "block";
                nameError.innerHTML = "Username cannot be empty or contain only spaces.";
            } else if (/\d/.test(trimmed)) {
                nameError.style.display = "block";
                nameError.innerHTML = "Name cannot contain numbers.";
            } else if (/[^A-Za-z\s]/.test(trimmed)) {
                nameError.style.display = "block";
                nameError.innerHTML = "Special characters are not allowed in the name.";
            } else {
                nameError.style.display = "none";
            }
        }


        function emailValidate() {
            const value = emailid.value.trim();

            if (!emailTouched) {
                emailError.style.display = "none";
                return;
            }

            // Only show error if user entered 8+ characters (likely finished typing)
            if (value.length < 8) {
                emailError.style.display = "none";
                return;
            }

            const pattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;

            if (!pattern.test(value)) {
                emailError.style.display = "block";
                emailError.innerHTML = "Please enter a valid email address.";
            } else {
                emailError.style.display = "none";
            }
        }

        function passwordValidate() {
            const password = passwordid.value.trim();
            const confirm = confirmPasswordid.value.trim();

            const hasAlpha = /[a-zA-Z]/.test(password);
            const hasDigit = /\d/.test(password);

            // PASSWORD
            if (!passwordTouched) {
                passwordError.style.display = "none";
            } else if (password.length < 8) {
                passwordError.style.display = "block";
                passwordError.innerHTML = "Password must be at least 8 characters long.";
            } else if (!hasAlpha || !hasDigit) {
                passwordError.style.display = "block";
                passwordError.innerHTML = "Password must contain both letters and numbers.";
            } else {
                passwordError.style.display = "none";
            }

            // CONFIRM PASSWORD (only validate if confirm field has been touched)
            if (!confirmTouched) {
                confirmPasswordError.style.display = "none";
            } else if (password !== confirm) {
                confirmPasswordError.style.display = "block";
                confirmPasswordError.innerHTML = "Passwords do not match. Please try again.";
            } else {
                confirmPasswordError.style.display = "none";
            }
        }


        document.addEventListener("DOMContentLoaded", () => {
            nameid.addEventListener("blur", () => {
                nameTouched = true;
                nameValidate();
            });

            emailid.addEventListener("blur", () => {
                emailTouched = true;
                emailValidate();
            });

            passwordid.addEventListener("blur", () => {
                passwordTouched = true;
                passwordValidate();
            });

            confirmPasswordid.addEventListener("blur", () => {
                confirmTouched = true;
                passwordValidate();
            });

            // Optional: live re-validation after blur
            nameid.addEventListener("input", () => {
                if (nameTouched) nameValidate();
            });
            emailid.addEventListener("input", () => {
                if (emailTouched) emailValidate();
            });
            passwordid.addEventListener("input", () => {
                if (passwordTouched) passwordValidate();
            });
            confirmPasswordid.addEventListener("input", () => {
                if (confirmTouched) passwordValidate();
            });

            // Final check before submit
            signform.addEventListener("submit", function (e) {
                nameTouched = emailTouched = passwordTouched = confirmTouched = true;

                nameValidate();
                emailValidate();
                passwordValidate();

                if (
                    nameError.style.display === "block" ||
                    emailError.style.display === "block" ||
                    passwordError.style.display === "block" ||
                    confirmPasswordError.style.display === "block"
                ) {
                    e.preventDefault();
                }
            });
        });
    </script>







</body>

</html>